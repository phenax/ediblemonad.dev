"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{2135:function(s,e,n){n.r(e),n.d(e,{meta:function(){return l}});var a=n(1527),t=n(313);let l={title:"TypeScript's type-system as a runtime",description:"Interrogation of the guy who allegedly turned typescripts type-system into it's own purely functional programming language",published:!0,date:"2023-02-13"};function i(s){let e=Object.assign({blockquote:"blockquote",p:"p",pre:"pre",code:"code",span:"span",h2:"h2",a:"a",hr:"hr"},(0,t.ah)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Disclaimer: The following content is not very informative"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Where were you on the night of 20th January? ANSWER ME, YOU FUCK!\nNot a talker, yeah? No problem. You'll talk eventually. They all do."}),"\n",(0,a.jsx)(e.p,{children:"We have an overwhelming amount of evidence that suggests that you were the one responsible for turning typescript's type system into it's own purely functional programming language.\nWhat kind of a sick, twisted man, does that?\nYou're gonna be spending a lot of time behind bars for this."}),"\n",(0,a.jsx)(e.p,{children:"The reports suggest that you can even read/write files, perform basic io and even interop with js from it?"}),"\n",(0,a.jsx)(e.p,{children:"Take a look at some of the crime scene photos."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-typescript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"export"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"type"})," main = [\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Greetotron 6000 initializing...'"}),">,\n\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutString"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Your name? '"}),">,\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Bind"}),"<",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"ReadLine"}),", <name ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"string"}),">",(0,a.jsx)(e.span,{className:"hljs-function",children:"() =>"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsxs)(e.span,{className:"hljs-string",children:["`Hello, ",(0,a.jsx)(e.span,{className:"hljs-subst",children:"${name}"}),"`"]}),">>,\n\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutString"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Your purpose in life? '"}),">,\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Bind"}),"<",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"ReadLine"}),", ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"HandleResponse"}),">,\n\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Bye bye'"}),">,\n]\n\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Equivalent to `HandleResponse :: string -> Effect ()`"}),"\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"interface"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"HandleResponse"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Kind1"}),"<",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"string"}),", ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Effect"}),"> {\n  ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"return"}),": ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Do"}),"<[\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsxs)(e.span,{className:"hljs-string",children:['`Interesting that you believe "',(0,a.jsxs)(e.span,{className:"hljs-subst",children:["${",(0,a.jsx)(e.span,{className:"hljs-variable language_",children:"this"}),"[",(0,a.jsx)(e.span,{className:"hljs-string",children:"'input'"}),"]}"]}),'" is your purpose. Hmmmm...`']}),">,\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Judging harshly...'"}),">,\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Saving response...'"}),">,\n    ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"WriteFile"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'./response.txt'"}),", ",(0,a.jsx)(e.span,{className:"hljs-variable language_",children:"this"}),"[",(0,a.jsx)(e.span,{className:"hljs-string",children:"'input'"}),"]>,\n  ]>\n}\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Do you feel any remorse for the victims you've affected? I hope you get the chair for this."}),"\n",(0,a.jsxs)(e.p,{children:["We also found the murder weapon on the crime scene - ",(0,a.jsx)(e.code,{children:"npx tsr run ./somefile.ts"}),".\nNot just that, it says here you built the weapon yourself using ",(0,a.jsx)(e.code,{children:"ts-morph"})," as a wrapper around the typescript compiler.\nDid you use the source file as your runtime representation of memory, you piece of shit?!\nBut, we're getting a bit ahead of ourselves here."]}),"\n",(0,a.jsx)(e.p,{children:"Let's get to the motive which is the only piece of the puzzle we're missing.\nWhy would a mediocre software developer suddenly go postal and make something like this?\nDid someone pay you to do this? Is that what this is about? Money?\nNaah. This was a little more personal than that.\nI have a theory for why you did it. And it's as simple as it gets.\nYou're a sick man who enjoys watching people cringe and suffer. Is that what this blog post is about? More cringe?"}),"\n",(0,a.jsx)(e.p,{children:"We've even figured out how you smuggled all the results of the io back into the program.\nIt was a result node, wasn't it? A stray object that you injected properties into, you sick fuck.\nWas that your runtime representation of memory? You just used the randomly generated property name to access the result in your effects."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-typescript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"type"})," __$result = {\n  ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'90sd9...'"}),": { ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"output"}),": ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'Result of computation'"})," }\n}\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Another thing that's been bugging me is,"}),"\n",(0,a.jsx)(e.h2,{children:"Why is the effects api monadic?"}),"\n",(0,a.jsx)(e.p,{children:"Was it because you wanted all operations on the results represented in the type tree so you could manipulate it?"}),"\n",(0,a.jsx)(e.p,{children:"You disgust me. In my 20 years on the force, I've never met a man as disturbed as you.\nDon't bother pleading insanity here though. This was calculated. No one is going to buy it."}),"\n",(0,a.jsx)(e.h2,{children:"Remember your hacky attempts at first class functions?"}),"\n",(0,a.jsx)(e.p,{children:"We have it in our custody and it's talking like a parrot.\nTelling us everything we need to know about your sick experiments!"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-typescript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"interface"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Greet"})," ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Kind1"}),"<",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"string"}),", ",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"string"}),"> {\n  ",(0,a.jsx)(e.span,{className:"hljs-attr",children:"return"}),": ",(0,a.jsxs)(e.span,{className:"hljs-string",children:["`Hello, ",(0,a.jsxs)(e.span,{className:"hljs-subst",children:["${",(0,a.jsx)(e.span,{className:"hljs-variable language_",children:"this"}),"[",(0,a.jsx)(e.span,{className:"hljs-string",children:"'input'"}),"]}"]}),"!`"]}),"\n}\n\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"type"})," msg = ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Apply"}),"<",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Greet"}),", ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'EdibleMonad'"}),"> ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// : 'Hello, EdibleMonad!'"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Yeah, we got you now, you bastard!"}),"\n",(0,a.jsx)(e.p,{children:"You weren't satisfied with this tho, were you?\nYou wanted your first-class functions to be inline. You needed it.\nSo you made your runtime recognize lambda functions as first-class functions."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-typescript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"type"})," main = ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Bind"}),"<\n  ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"ReadFile"}),"<",(0,a.jsx)(e.span,{className:"hljs-string",children:"'./file.txt'"}),">,\n  <T ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"extends"})," ",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"string"}),">",(0,a.jsx)(e.span,{className:"hljs-function",children:"() =>"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"PutStringLn"}),"<T>\n>\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["But this is where you fucked up. You couldn't generalize this as a pattern because typescript doesn't work like that.\nTypescript doesn't support higher kinded types, dumbass!\nSo you settled for only allowing this pattern inside ",(0,a.jsx)(e.code,{children:"Bind"})," and ",(0,a.jsx)(e.code,{children:"Try"}),".\nYou flew too close to the sun, Icarus and it lead us straight to you."]}),"\n",(0,a.jsx)(e.p,{children:"You're done, buddy. This case is as good as closed so you might as well confess."}),"\n",(0,a.jsx)(e.h2,{children:"Alright! Alright! I confess!"}),"\n",(0,a.jsx)(e.p,{children:"It was me who did it. I made the runtime that turns typescript types into a purely functional programming language!\nI did it because I fucking wanted to! And I enjoyed every second of it!"}),"\n",(0,a.jsxs)(e.p,{children:["I saw people making things that defied all logic, like an ",(0,a.jsx)(e.a,{href:"https://github.com/judehunter/ts-asm",children:"assembly interpreter"})," within the typescript type-system.\nI knew if I wanted to make it do something more, I'll need a runtime! That's when I came up with my master plan."]}),"\n",(0,a.jsx)(e.p,{children:"I don't regret a thing! I've made my mark on the world even if that mark is a piss stain on the side of the street."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Akshay was charged with cringe and sentenced to death by lethal injection. It was later discovered that this wasn't all that big of a deal and completely blown out of proportion"}),"\n"]})]})}e.default=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,t.ah)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(i,s)})):i(s)}}}]);