"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{4682:function(s,e,n){n.r(e),n.d(e,{meta:function(){return i}});var a=n(1527),l=n(313);let i={title:"JS Magic Tricks to impress your friends",description:"JavaScript is a magical language in all the wrong ways. Here's some magic tricks with the js language you can use to impress your friends",published:!0,date:"2019-03-29"};function t(s){let e=Object.assign({p:"p",blockquote:"blockquote",hr:"hr",h1:"h1",pre:"pre",code:"code",span:"span",strong:"strong",em:"em",h4:"h4",a:"a"},(0,l.ah)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"My name is Houdini J.S. Magnifico. What I'm about to perform here are a set of illusions and magic tricks that are sure to blow your mind! So prepare to be amazed!"}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"The tricks shown here are performed by trained professionals. Do not attempt these stunts at home. Do it in production. Viewer discretion is advised."}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Let the show begin!"}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"For my first trick, I will make this function… DISAPPEAR!"}),"\n",(0,a.jsx)(e.p,{children:"This is my totally normal function. Nothing weird about it. A function you'd find in the wild."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"typeof"})," innocentTotallyNormalFunction === ",(0,a.jsx)(e.span,{className:"hljs-string",children:'"function"'})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > true"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Let me just wave Brendan Eich's mouse pad over it for a bit… and… BOOM!"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-title function_",children:"innocentTotallyNormalFunction"}),"()\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > Uncaught TypeError: innocentTotallyNormalFunction is not a function"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"GONE! The function is not a function anymore. Schrodinger's function has dissappeared!"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.em,{children:"audience applauds"})})}),"\n",(0,a.jsx)(e.p,{children:"Thank you! Thank you!"}),"\n",(0,a.jsx)(e.h4,{children:"Here's how it works"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," innocentTotallyNormalFunction = (",(0,a.jsx)(e.span,{className:"hljs-function",children:"() =>"})," {}).",(0,a.jsx)(e.span,{className:"hljs-property",children:"apply"}),".",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"bind"}),"();\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Works with any method's bind();"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Weird right? It's called JavaScript and a lot of people use this in production. The reason this doesn't work is because .apply method expects the context of a function but .bind gives it undefined as the context. this.means that the apply method doesn't know which function it is trying to apply. Then the apply method has an identity crisis and everything goes to shit."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"Magic list"}),"\n",(0,a.jsx)(e.p,{children:"Here I have a function that clones an array. Perfectly normal, production ready code."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"clone"})," = list => list.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"reduce"}),"(",(0,a.jsxs)(e.span,{className:"hljs-function",children:["(",(0,a.jsx)(e.span,{className:"hljs-params",children:"newList, item"}),") =>"]})," [...newList, item], []);\n\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Another clone implementation you can use is,"}),"\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," clone = ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Object"}),".",(0,a.jsx)(e.span,{className:"hljs-property",children:"values"}),";\n\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// Or if you wanna go old school..."}),"\n",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"clone"})," = list => {\n  ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," newList = [];\n\n  ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"for"}),"(",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"let"})," index ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"in"})," list) {\n    newList.",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"push"}),"(list[index]);\n  }\n\n  ",(0,a.jsx)(e.span,{className:"hljs-keyword",children:"return"})," newList;\n};\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Here's an ordinary list with nothing fishy going on inside"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:["array.",(0,a.jsx)(e.span,{className:"hljs-property",children:"length"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > 23"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"I'm just gonna casually use the clone function to copy the list and check the length of the newly created list…"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-title function_",children:"clone"}),"(array).",(0,a.jsx)(e.span,{className:"hljs-property",children:"length"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > 1"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Magic!!"})}),"\n",(0,a.jsx)(e.p,{children:"The list is no longer 23 items long. 23 to 1! Next-gen compression algorithm, question mark? Or is it just magic?"}),"\n",(0,a.jsx)(e.h4,{children:"Well, here's how it all went down"}),"\n",(0,a.jsx)(e.p,{children:"The concept behind this is one that not many developers are familiar with. Array holes, also called empty slots are points in an array that are empty. No, I'm not talking about undefined or null or 0. Just empty."}),"\n",(0,a.jsxs)(e.p,{children:["Ref: ",(0,a.jsx)(e.a,{href:"https://2ality.com/2015/09/holes-arrays-es6.html",children:"Array holes/empty slots"}),", ",(0,a.jsx)(e.a,{href:"https://2ality.com/2012/06/dense-arrays.html",children:"Sparse arrays"})]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-title class_",children:"Array"}),"(",(0,a.jsx)(e.span,{className:"hljs-number",children:"5"}),") ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > [<empty x 5>]"}),"\n",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// OR"}),"\n[,,,,,] ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > [<empty x 5>]"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"This creates an array of 5 items but without any values. But javascript doesn't use undefined as the default values tho. It instead creates empty slots (holes) in the arrays but keeps given the length. So when you copy it using the reduce method, it doesn't iterate over the empty slots. So the newly generated array is shorter."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"Schrodinger's magic list"}),"\n",(0,a.jsx)(e.p,{children:"The list we are gonna be working on is document.all which is a list of all nodes in a document."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-variable language_",children:"document"}),".",(0,a.jsx)(e.span,{className:"hljs-property",children:"all"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > HTMLAllCollection {...}"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Council of W3C, give me the strength to make this list disappear!!! Boom! Shaa! Waka-Waka Boom!"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"typeof"})," ",(0,a.jsx)(e.span,{className:"hljs-variable language_",children:"document"}),".",(0,a.jsx)(e.span,{className:"hljs-property",children:"all"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// > undefined"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.em,{children:"Be Amazed!!"})})}),"\n",(0,a.jsx)(e.p,{children:"Go get an MRI scan because your tiny little brain just exploded!"}),"\n",(0,a.jsx)(e.h4,{children:"Here's the big reveal!"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"document.all"})," is a very old and deprecated api that allowed you to iterate over all the nodes rendered to the DOM. The typeof expression returning ",(0,a.jsx)(e.code,{children:"undefined"})," was by design as a part of deprecation of that non-standard feature. Weird, I know. But that's just how javascript rolls."]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"Are we Infinity yet?"}),"\n",(0,a.jsxs)(e.p,{children:["Let's take a number, ",(0,a.jsx)(e.code,{children:"let x: number"}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:["x + ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"})," === x; ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> true"}),"\nx + ",(0,a.jsx)(e.span,{className:"hljs-number",children:"2"})," === x; ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> false"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"“What just happened?”"}),"\n",(0,a.jsx)(e.p,{children:"I added 1 to x and the value didn't change! Then I added 2 to it and… the universe… it changed."}),"\n",(0,a.jsx)(e.h4,{children:"Check out how this works"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," x = ",(0,a.jsx)(e.span,{className:"hljs-number",children:"1e16"}),"; ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// OR 1 * Math.pow(10, 16) OR 10000000000000000"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"This is by design. It's documented in IEEE 754-2008. When the number is as large as this, it rounds it up to the nearest even number."}),"\n",(0,a.jsxs)(e.p,{children:["Ref: ",(0,a.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/IEEE_754#Rounding_rules",children:"Rounding rules section in IEEE 754"})]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"Is a “not a number” a number or not a number? Well, it's NaN of your business"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"typeof"})," ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"NaN"})," === ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'number'"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> true"}),"\n",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"NaN"})," !== ",(0,a.jsx)(e.span,{className:"hljs-title class_",children:"NaN"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> true"}),"\n"]})}),"\n",(0,a.jsx)(e.p,{children:"Wut? ‘Not a number' is a number and ‘Not a number' is not equal to ‘Not a number'"}),"\n",(0,a.jsx)(e.p,{children:"Javascript is a magical language"}),"\n",(0,a.jsx)(e.h4,{children:"Know the trick"}),"\n",(0,a.jsx)(e.p,{children:"NaN is a numeric data type but it behaves as an identity when any mathematical operation is applied to it."}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.em,{children:"“But why is NaN === NaN returning false?”"})}),"\n",(0,a.jsx)(e.p,{children:"Because the Gods of Javascript wished so. If either side of === operator is NaN, the operation returns false. Thats just how it works. Don't question it."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h1,{children:"Check if your list has more than 1 items"}),"\n",(0,a.jsx)(e.p,{children:"A very complicated problem in programming."}),"\n",(0,a.jsx)(e.p,{children:"A normie dev would go ahead and write something like"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"hasAtleast2Elements"})," = x => x.",(0,a.jsx)(e.span,{className:"hljs-property",children:"length"})," >= ",(0,a.jsx)(e.span,{className:"hljs-number",children:"2"}),";\n"]})}),"\n",(0,a.jsx)(e.p,{children:"That solution is 13 characters long. In the modern world of javascript, 13 characters is way too many characters. It is a performance bottleneck."}),"\n",(0,a.jsx)(e.p,{children:"Let's write something more optimized in size"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:[(0,a.jsx)(e.span,{className:"hljs-keyword",children:"const"})," ",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"hasAtleast2Elements"})," = x => !",(0,a.jsx)(e.span,{className:"hljs-built_in",children:"isNaN"}),"(+x);\n"]})}),"\n",(0,a.jsxs)(e.p,{children:["There. 10 characters. Much better. We removed ",(0,a.jsx)(e.strong,{children:"23%"})," of our JavaScript! Good job. Less JavaScript is good JavaScript"]}),"\n",(0,a.jsx)(e.h4,{children:"The genius behind this action"}),"\n",(0,a.jsx)(e.p,{children:"We improved our load time by 23% but at what cost?! How does that function even work? Magic? Not magic, JavaScript!"}),"\n",(0,a.jsx)(e.p,{children:"The + operator applied to a list returns NaN if the number of items in the list is more than 1."}),"\n",(0,a.jsx)(e.p,{children:"Why does it do that? Well, type casting. +[] is equal to +[].toString()."}),"\n",(0,a.jsx)(e.p,{children:"So,"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:"hljs language-javascript",children:["[].",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"toString"}),"() === ",(0,a.jsx)(e.span,{className:"hljs-string",children:"''"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> +'' === 0"}),"\n[",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),"].",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"toString"}),"() === ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'1'"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> +'1' === 1"}),"\n[",(0,a.jsx)(e.span,{className:"hljs-number",children:"1"}),", ",(0,a.jsx)(e.span,{className:"hljs-number",children:"2"}),"].",(0,a.jsx)(e.span,{className:"hljs-title function_",children:"toString"}),"() === ",(0,a.jsx)(e.span,{className:"hljs-string",children:"'1,2'"})," ",(0,a.jsx)(e.span,{className:"hljs-comment",children:"// >> +'1,2' === NaN (Cannot typecast as it is not a number)"}),"\n"]})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.p,{children:"That's all for today! Tune in next time to watch Magnifico use magic in production and get fired immediately."}),"\n",(0,a.jsx)(e.p,{children:"Now I'm gonna make myself disappear."}),"\n",(0,a.jsx)(e.p,{children:"…"}),"\n",(0,a.jsx)(e.p,{children:"…"}),"\n",(0,a.jsx)(e.p,{children:"…"}),"\n",(0,a.jsx)(e.p,{children:"Why is this… Just a second folks… Some technical difficul…"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.em,{children:"magic man magically disappears"})})})]})}e.default=function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,l.ah)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(t,s)})):t(s)}}}]);