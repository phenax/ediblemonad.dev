<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="manifest" href="/manifest.json"/><style></style><style data-href="/styles.d32951b012f1c876b926.css">.errorPage-module--wrapper--24p5i{text-align:center;line-height:1.5em;font-size:1.1em;font-family:Raleway,Helvetica,"sans-serif"}.errorPage-module--title--2yVF6{font-size:6em;padding:1em 0;font-weight:100;color:#58c9b9;background-color:#151823}.errorPage-module--text--1WaUE{padding:1.3em .9em .5em}.errorPage-module--links--3F1n9 a{padding:.1em;color:#519d9e;border-bottom:1px solid transparent}.errorPage-module--links--3F1n9 a:hover{border-bottom-color:#58c9b9;color:#58c9b9}.Menu-module--topbar--l3Du5{position:absolute;top:0;left:0;width:100%;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between;padding:.1em;font-size:1em;z-index:9}.Menu-module--topbarMenubtn--2dTAj{-webkit-justify-content:flex-end;justify-content:flex-end;display:-webkit-flex;display:flex;-webkit-flex:1 1;flex:1 1;font-size:1.4em}.Menu-module--topbarMenubtn--2dTAj>a{display:inline-block;padding:1.5em 1.8em;color:#fff}.Menu-module--menu--1GyQ7{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;pointer-events:none;contain:strict;font-size:1em}.Menu-module--menu--1GyQ7.Menu-module--menu_visible--vWb-2,.Menu-module--menu--1GyQ7:target{pointer-events:auto}.Menu-module--menu--1GyQ7.Menu-module--menu_visible--vWb-2 .Menu-module--menuListLi--g9O0M,.Menu-module--menu--1GyQ7.Menu-module--menu_visible--vWb-2 .Menu-module--menuSection--1umsa,.Menu-module--menu--1GyQ7:target .Menu-module--menuListLi--g9O0M,.Menu-module--menu--1GyQ7:target .Menu-module--menuSection--1umsa{-webkit-transform:none;transform:none}.Menu-module--menuClosebtn--u98FN.Menu-module--menuClosebtn--u98FN{position:absolute;right:0;top:0;z-index:11;padding:1em;color:#fff;font-size:1.7em}.Menu-module--menuSection--1umsa{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;height:100vh;box-shadow:0 0 30px 1px rgba(0,0,0,.2);will-change:transform;contain:strict;transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out}.Menu-module--menuSide--3tOcb{background-color:#519d9e;-webkit-transform:translateX(-102%);transform:translateX(-102%)}.Menu-module--menuList--1Sjgl{background-color:#151823;-webkit-flex-direction:column;flex-direction:column;-webkit-transform:translateX(102%);transform:translateX(102%)}.Menu-module--menuListLi--g9O0M{width:45%;transition:-webkit-transform .4s ease-in-out;transition:transform .4s ease-in-out;transition:transform .4s ease-in-out,-webkit-transform .4s ease-in-out;-webkit-transform:translateX(300px);transform:translateX(300px);will-change:transform;contain:content}.Menu-module--menuListLi--g9O0M:first-child{transition-delay:0s}.Menu-module--menuListLi--g9O0M:nth-child(2){transition-delay:.05s}.Menu-module--menuListLi--g9O0M:nth-child(3){transition-delay:.1s}.Menu-module--menuListLi--g9O0M:nth-child(4){transition-delay:.15s}.Menu-module--menuListLi--g9O0M:nth-child(5){transition-delay:.2s}.Menu-module--menuListLi--g9O0M:nth-child(6){transition-delay:.25s}.Menu-module--menuListLi_selected--37t2z .Menu-module--menuListLink--340GI{color:#519d9e}.Menu-module--menuListLink--340GI{color:#fff;padding:1em;font-weight:100;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;contain:content;will-change:color;transition:color .25s ease-in-out}.Menu-module--menuListLink--340GI:hover{color:#58c9b9}.Menu-module--menuListLink--340GI .Menu-module--title--14z7n{font-size:2em}.Menu-module--menuListLink--340GI .Menu-module--descr--_ccoX{font-size:.9em;opacity:.8;letter-spacing:.08em;padding-top:.2em}.Menu-module--descr--_ccoX,.Menu-module--title--14z7n{font-size:1em}.Menu-module--logo--KR0nA{text-align:center}.Menu-module--logoImg--28woS{width:150px}.Menu-module--logoText--2nKwh{font-size:1.5em;color:#fff}@media (max-width:600px){.Menu-module--topbar--l3Du5{font-size:.7em;padding:0}.Menu-module--menu--1GyQ7{font-size:.9em}.Menu-module--menuClosebtn--u98FN{font-size:1.7em}.Menu-module--menuList--1Sjgl{padding:1em 2em}.Menu-module--menuListLink--340GI{font-size:.9em 1em}.Menu-module--menuListLi--g9O0M{width:100%;text-align:right}.Menu-module--menuListLi--g9O0M .Menu-module--title--14z7n{font-size:1.9em}}body,html{background-color:#eee}:root{font-size:16px;color:#222;font-family:Raleway,Helvetica,"sans-serif"}*{box-sizing:border-box}:after,:before{content:""}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}a{text-decoration:none;outline:none!important}.common-module--row--oK6lq{display:-webkit-flex;display:flex}.common-module--row--oK6lq.common-module--sp-bt--3ddeC{-webkit-justify-content:space-between;justify-content:space-between}.common-module--row--oK6lq.common-module--sp-ar--3dEBD{-webkit-justify-content:space-around;justify-content:space-around}.common-module--row--oK6lq .common-module--col--2Gflu{-webkit-flex:1 1;flex:1 1}@media (max-width:800px){.common-module--hideOnSm--10ued{display:none!important}.common-module--row--oK6lq:not(.common-module--no-collapse--8h6hZ){display:block}}@media (max-width:1000px){.common-module--hideOnMd--PipRW{display:none!important}}@-webkit-keyframes PageHeader-module--slideIn--3nS53{0%{opacity:0;-webkit-transform:translateX(100px);transform:translateX(100px)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes PageHeader-module--slideIn--3nS53{0%{opacity:0;-webkit-transform:translateX(100px);transform:translateX(100px)}to{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}}.PageHeader-module--wrapper--kz1Kb{background-color:#151823;padding:2em 1em;font-size:.8em;text-align:left}.PageHeader-module--content--2lza8{width:80%;margin:6em auto;color:#fff;padding:1em}.PageHeader-module--title--2f3sB{font-size:4em;padding:.25em 0}.PageHeader-module--subtitle--3qSY5,.PageHeader-module--title--2f3sB{-webkit-animation:PageHeader-module--slideIn--3nS53 .13s ease-in-out forwards;animation:PageHeader-module--slideIn--3nS53 .13s ease-in-out forwards}.PageHeader-module--subtitle--3qSY5{font-size:1.3em;font-weight:100;letter-spacing:1px}@media (max-width:1000px){.PageHeader-module--wrapper--kz1Kb{font-size:.8em}}@media (max-width:600px){.PageHeader-module--wrapper--kz1Kb{font-size:.7em;padding:5em 1em;text-align:center}.PageHeader-module--content--2lza8{width:100%}.PageHeader-module--title--2f3sB{font-size:3.5em}}.page-module--content--39xak{max-width:1000px;margin:2em auto;padding:1em;line-height:1.5em}.page-module--title--2BCf2{font-size:1.5em;font-weight:100;padding:.5em 0}.page-module--para--3KHcm{line-height:1.8em;text-indent:1em;padding:.7em 0}.page-module--link--1Kdjk{color:#519d9e}.page-module--link--1Kdjk:hover{text-decoration:underline;color:#58c9b9}.BlogPostCard-module--card--3vt5f{position:relative;display:block;padding:1.2em 1.5em;margin-top:1em;background-color:#fff;box-shadow:0 4px 5px 1px rgba(0,0,0,.06);text-decoration:none;color:#151823}.BlogPostCard-module--card--3vt5f:before{content:"";position:absolute;top:0;left:0;width:5px;height:100%;background-color:#58c9b9;-webkit-transform-origin:0 50%;transform-origin:0 50%;-webkit-transform:scaleX(0);transform:scaleX(0);will-change:transform;transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out}.BlogPostCard-module--card--3vt5f:hover:before{-webkit-transform:none;transform:none}.BlogPostCard-module--card--3vt5f:hover .BlogPostCard-module--cardTitle--3hyRM{color:#519d9e}.BlogPostCard-module--cardTitle--3hyRM{font-size:1.5em;padding-bottom:.2em;font-family:Oswald,Raleway,Helvetica,sans-serif}.BlogPostCard-module--date--1jSU8{color:#999;padding-right:1em}.Contacts-module--contact--2oV3v a{color:#519d9e}.Contacts-module--email--3EsBO{font-size:1.6em;text-align:center;padding:2em 0 1em}.Contacts-module--social--2UycU{margin-top:1em;text-align:center;font-size:2.3em;padding:.5em 0}.Contacts-module--social--2UycU a{display:block;position:relative;width:100%;opacity:.6;transition:opacity .3s ease-in-out}.Contacts-module--social--2UycU a:after{content:attr(data-name);letter-spacing:0;position:absolute;top:150%;left:50%;font-size:.35em;-webkit-transform:translate(-50%,10px);transform:translate(-50%,10px);background-color:#151823;padding:.4em .7em;border-radius:2px;opacity:0;transition:all .3s ease-in-out}.Contacts-module--social--2UycU a:hover{opacity:1}.Contacts-module--social--2UycU a:hover:after{opacity:1;-webkit-transform:translate(-50%);transform:translate(-50%)}@media (max-width:800px){.Contacts-module--social--2UycU{text-align:left;padding:.5em 1em}.Contacts-module--social--2UycU a{opacity:.8;margin-bottom:.5em;transition:opacity .1s ease-in-out}.Contacts-module--social--2UycU a:after{font-size:.5em;left:2.3em;top:0;opacity:1;-webkit-transform:translate(0);transform:translate(0);background:transparent}.Contacts-module--social--2UycU a:hover:after{-webkit-transform:none;transform:none}}.ProjectCard-module--project--2iqtR{background-color:#9dc8c8;box-shadow:0 .3em .7em .05em rgba(0,0,0,.1);overflow:hidden;border-radius:3px;margin-top:3em}.ProjectCard-module--project--2iqtR:nth-child(2n) .ProjectCard-module--wrap--1SnrK{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.ProjectCard-module--project--2iqtR .ProjectCard-module--block--3e1Cz{position:relative;min-height:18em;text-align:center}.ProjectCard-module--project--2iqtR .ProjectCard-module--blockTitle--9I5yO{color:#222;display:inline-block;text-transform:uppercase;font-weight:100;font-size:1.9em;padding:1.5em .6em .3em;margin-bottom:.5em;border-bottom:1px solid #9dc8c8}.ProjectCard-module--project--2iqtR .ProjectCard-module--blockTags--307eS{font-size:.8em}.ProjectCard-module--project--2iqtR .ProjectCard-module--blockTagsTag--SKhyC{display:inline-block;padding:.2em .6em;line-height:1em;background-color:#9dc8c8;color:#fff;font-weight:700;border-radius:3px;margin:.1em}.ProjectCard-module--project--2iqtR .ProjectCard-module--blockContent--2O88R{text-align:left;color:#555;font-size:.9em;line-height:2em;letter-spacing:.07em;padding:1em;min-height:10.44em}.ProjectCard-module--blockLinks--3wp46{text-align:right;font-size:1.12em}.ProjectCard-module--blockLinks--3wp46 a{display:inline-block;font-size:1em;padding:.5em .8em;font-family:Oswald,Raleway,Helvetica,sans-serif;font-weight:300;background-color:#519d9e;color:#fff;text-transform:uppercase;box-shadow:0 .3em .7em .05em rgba(0,0,0,.1);border-radius:3px;margin:.2em;opacity:.8;transition:opacity .2s ease-in-out;will-change:opacity}.ProjectCard-module--blockLinks--3wp46 a:hover{opacity:1}.ProjectCard-module--blockLinkIcon--34qHe{display:inline-block;padding:0 .2em 0 0;font-family:fontello,Raleway,Helvetica,sans-serif!important}.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_bg--1gFM7{-webkit-flex:3 1;flex:3 1;background-size:100%;background-repeat:no-repeat;background-position:50%}@media (max-width:800px){.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_bg--1gFM7{min-height:15em}}.ProjectCard-module--blockFakeBackground--2X_Y3{position:absolute;top:0;left:0;width:100%;height:100%;background-size:100%;background-repeat:no-repeat;background-position:50%;background-color:#9dc8c8;opacity:1;transition:opacity .5s linear;will-change:opacity}.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_sm--GZH_4{-webkit-flex:4 1;flex:4 1;padding:1em;background-color:#fff;position:relative;box-shadow:0 .3em .7em .05em rgba(0,0,0,.1)}.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_sm--GZH_4:after,.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_sm--GZH_4:before{position:absolute;top:50%;border:.5em solid transparent;width:0;height:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_sm--GZH_4:after{left:100%;border-left-color:#fff}.ProjectCard-module--block--3e1Cz.ProjectCard-module--block_sm--GZH_4:before{right:100%;border-right-color:#fff}.SkillList-module--wrapper--2wU5h{padding:1.5em 1em;line-height:2em}.SkillList-module--selector--3eLSu{font-size:2em;font-family:Oswald,Raleway,Helvetica,sans-serif}.SkillList-module--propList--7aN2I{padding:1em 0 1em 3em;font-family:Lucida Console,Monaco,"monospace",Raleway,Helvetica,"sans-serif"}.SkillList-module--propertyName--2eRHU{color:#151823}.SkillList-module--propertyName--2eRHU:after{content:":";padding:0 .4em 0 .1em}.SkillList-module--propertyValue--RHSYG:after{content:";"}.SkillList-module--propertyValue--RHSYG:before{content:"learning";color:#888}.SkillList-module--propertyValue--RHSYG.SkillList-module--cool--3Eowi:before{content:"beginner";color:#519d9e}.SkillList-module--propertyValue--RHSYG.SkillList-module--awesome--RS0Wy:before{content:"intermediate";color:#a593e0}.SkillList-module--propertyValue--RHSYG.SkillList-module--stud--1AAUG:before{content:"confident";color:#8e44ad}.blogpost-module--wrapper--1pgRj{position:relative;max-width:1000px;margin:3em auto 1em;padding:1em}.blogpost-module--content--26EfY{font-weight:400;padding:2.2em 0;font-size:1.1em;line-height:1.7em}.blogpost-module--gobackButton--3Mlek{color:#58c9b9;font-size:1.2em}.blogpost-module--gobackButton--3Mlek:hover{color:#519d9e;text-decoration:underline}.blogpost-module--date--GvcZX{text-align:right;font-family:Oswald,Raleway,Helvetica,sans-serif}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.blog-content code,.blog-content pre{font-family:Fira Mono,Courier New,Courier,monospace}.blog-content pre[class*=language-]{padding:1.3em;background:#252c33;border-radius:0}.blog-content pre[class*=language-]>code[class*=language-]{background:#252c33;font-size:.8em;line-height:1.5em;margin:.5em 0}.blog-content :not(pre)>code{padding:0 .3em;background:#252c33;border-radius:0}.blog-content :not(pre)>code.language-text{color:#444;background:#eaeaef}.blog-content h1,.blog-content h2,.blog-content h3,.blog-content h4,.blog-content h5,.blog-content h6{margin:1.5em 0 .5em;font-weight:600;color:#444;line-height:1.2em;font-family:Oswald,serif}.blog-content h1{font-size:2.625em}.blog-content h2{font-size:2.125em}.blog-content h3{font-size:1.5em}.blog-content h4{font-size:1.7em}.blog-content h5{font-size:1.3em}.blog-content h6{font-size:1.2em}.blog-content p{display:block;margin:1em 0}.blog-content blockquote{background-color:#f9f9f9;color:#666;padding:.5em 1em;font-style:italic}.blog-content blockquote p{padding:0;margin:0}.blog-content hr{position:relative;margin:2.5em auto 1.6em;overflow:visible}.blog-content hr,.blog-content hr:after,.blog-content hr:before{display:block;border:none;background-color:#aaa;width:5px;height:5px;border-radius:50%}.blog-content hr:after,.blog-content hr:before{content:"";position:absolute;top:0;left:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.blog-content hr:before{margin-left:-50px}.blog-content hr:after{margin-left:50px}.blog-content a{color:#3498db;text-decoration:none}.blog-content a:hover{text-decoration:underline}.blog-content ol{list-style:decimal}.blog-content ul{list-style:disc;margin-left:1.3em}.blog-content li{margin:1em 0}.blog-content img{display:block;margin-left:auto;margin-right:auto}.blog-content strong{font-weight:600}</style><meta name="generator" content="Gatsby 2.1.16"/><title data-react-helmet="true">PureFunctionalJS - Algebraic Effects in JS - Akshay Nair&#x27;s blog</title><meta data-react-helmet="true" name="description" content="Algebraic effects is an alternative way to model your side-effects. Lets bring that to javascript."/><meta data-react-helmet="true" name="keywords" content="algebraic,algebraic-effects,javascript,functional,js,fp,generator,effect"/><style data-react-helmet="true">
          html, body {
            background-color: #fff;
          }
        </style><link href="https://fonts.googleapis.com/css?family=Oswald:300,400|Raleway:100,400|Fira+Mono:400&amp;display=swap" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Akshay Nair&#x27;s blog" href="/blog-rss.xml"/><link as="script" rel="preload" href="/component---src-pages-blog-algebraic-effects-mdx-718651d38c3b5f5677cb.js"/><link as="script" rel="preload" href="/app-e09874469f93c353c21a.js"/><link as="script" rel="preload" href="/2-f8ffd91e9994516e7aa3.js"/><link as="script" rel="preload" href="/1-568e635cc0d331f623af.js"/><link as="script" rel="preload" href="/styles-c0adcc84da8432c7d681.js"/><link as="script" rel="preload" href="/webpack-runtime-1bb13a4a7498ee652ac1.js"/><link as="fetch" rel="preload" href="/static/d/556/path---blog-algebraic-effects-295-12d-72I2H5I5vq6PhPMZ5XLx0rjI0Ys.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div class="Menu-module--topbar--l3Du5"><div class="Menu-module--topbarMenubtn--2dTAj"><a href="#menu" class="fas fa-bars"></a></div></div><div class="Menu-module--menu--1GyQ7 common-module--row--oK6lq" id="menu"><div class="Menu-module--menuSection--1umsa Menu-module--menuSide--3tOcb common-module--hideOnSm--10ued common-module--col--2Gflu"><div class="Menu-module--logo--KR0nA"><img class="Menu-module--logoImg--28woS" draggable="false" src="/static/154949b1fe0e5bde989bad025624cc67/c29cf/logo.png" alt="Akshay Nair"/><div class="Menu-module--logoText--2nKwh">Hey There</div></div></div><ul class="Menu-module--menuSection--1umsa Menu-module--menuList--1Sjgl common-module--col--2Gflu"><a href="#" class="Menu-module--menuClosebtn--u98FN fas fa-times"></a><li class="Menu-module--menuListLi--g9O0M Menu-module--menuListLi_selected--37t2z"><a class="Menu-module--menuListLink--340GI" href="/"><div class="Menu-module--title--14z7n">Projects</div><div class="Menu-module--descr--_ccoX">Fun stuff</div></a></li><li class="Menu-module--menuListLi--g9O0M"><a class="Menu-module--menuListLink--340GI" href="/about"><div class="Menu-module--title--14z7n">About Me</div><div class="Menu-module--descr--_ccoX">Know more about this metal-head</div></a></li><li class="Menu-module--menuListLi--g9O0M"><a class="Menu-module--menuListLink--340GI" href="/blog"><div class="Menu-module--title--14z7n">Blog</div><div class="Menu-module--descr--_ccoX">I post about FP, react, etc</div></a></li><li class="Menu-module--menuListLi--g9O0M"><a class="Menu-module--menuListLink--340GI" href="/skills"><div class="Menu-module--title--14z7n">Skills</div><div class="Menu-module--descr--_ccoX">I haz m@d 5ki11z br0</div></a></li><li class="Menu-module--menuListLi--g9O0M"><a class="Menu-module--menuListLink--340GI" href="/contact"><div class="Menu-module--title--14z7n">Contact</div><div class="Menu-module--descr--_ccoX">Get in touch</div></a></li></ul></div></div><div class="PageHeader-module--wrapper--kz1Kb"><div class="PageHeader-module--content--2lza8"><a class="blogpost-module--gobackButton--3Mlek" href="/blog"><i class="fa fa-angle-left"></i><span style="padding-left:0.5em">View all articles</span></a><div class="PageHeader-module--title--2f3sB">PureFunctionalJS - Algebraic Effects in JS</div><div class="PageHeader-module--subtitle--3qSY5">Algebraic effects is an alternative way to model your side-effects. Lets bring that to javascript.</div></div></div><div class="blogpost-module--wrapper--1pgRj"><div><span class="blogpost-module--date--GvcZX">Posted on <!-- -->17th March, 2019</span></div><div class="blogpost-module--content--26EfY blog-content"><div><p>It is a known fact in the developer community that pure functions are easier to test and reason about. But we can&#x27;t just get rid of side-effects as real world projects don&#x27;t work that way as stuff like rendering to the browser are not pure operations.</p><p>JavaScript as a language doesn&#x27;t really care about whether your operation is pure or impure. So it is left largely to the developers to find better and better ways to manage side-effects. We can look at pure functional programming languages to get some idea as to how we can work with effects. On the haskell side of things we will find monads and monad transformers for creating and managing side-effects. Monads are amazing but they are a strange concept to wrap your head around. Also, they do not compose that well.</p><hr/><h2>Algebraic Effects!</h2><p>This is the part of the story where the knight in shining armour comes and saves the princess. Algebraic Effects!</p><p>Algebraic effects is an alternative way to model your side-effects.</p><p>At first algebraic effects may sound very foreign but we already have in javascript something similar. Exception handling.
Algebraic effects are basically just exceptions that can be resumed.</p><p>Imagine if javascript could do something like this...</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">someSafeOperation</span> <span class="token operator">=</span> input <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">someunsafeOperation</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token keyword">throw</span> NoResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">normalize</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> resume<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> NoResult<span class="token punctuation">:</span> <span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">{</span> errorMessage<span class="token punctuation">:</span> <span class="token string">&#x27;No result found&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">{</span> errorMessage<span class="token punctuation">:</span> <span class="token string">&#x27;Something went wrong&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">words</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello world&#x27;</span><span class="token punctuation">)</span> <span class="token comment">// &gt; [&#x27;Hello&#x27;, &#x27;world&#x27;]</span>
<span class="token function">words</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// &gt;[]</span></code></pre></div><p>If someunsafeOperation threw an error or it returned an empty value, the exceptions would allow the programmer to resume the rest of the program with ease.</p><p>Obviously, JS can&#x27;t do that.
But the idea here is pretty powerful if you think of this in terms of isolating pure and impure behaviors.
Imagine your application only threw exceptions like that and expected them to be continued. Technically, your application wouldn&#x27;t include any effects but would be an instruction to the catch to handle the effect.</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">renderUserData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">throw</span> <span class="token function">FetchUserData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">throw</span> ScrollToTop<span class="token punctuation">;</span>

  <span class="token keyword">throw</span> <span class="token function">RenderUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">runRenderUserData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">renderUserData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> resume<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">match</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// Ignore the specifics of the `match` function. It is just an alternative to switch-case</span>
      FetchUserData<span class="token punctuation">:</span> id <span class="token operator">=&gt;</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resume<span class="token punctuation">)</span><span class="token punctuation">,</span>
      ScrollToTop<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      RenderUser<span class="token punctuation">:</span> user <span class="token operator">=&gt;</span> <span class="token function">renderUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Some function that renders ui</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div><p>Having the operation signature independent of the operation behaviour makes for some powerful compositions as you will see soon enough. Guess what, if you squint hard enough at the <code class="language-text">renderUserData</code> function, you&#x27;ll see the picture react is trying to paint with hooks.</p><p>The concept of algebraic effects and the ideas it promotes have been gaining a lot of popularity recently and pushing that to overdrive is the direction that the react team is taking. With React Fiber, Suspense, React hooks(also TNG-hooks), everything is pointing to &quot;algebraic effects is the future&quot;. React hooks was pretty successful in adapting the mental model of algebraic-effects to writing ui components. But algebraic effects are about a lot more than that. </p><h2>Why algebraic effects?</h2><p>The concept of algebraic effects, allows you to design your computational effects in terms of program flow. You isolate the effect (operation behavior) from the call (operation signature) and this creates a clean, composable, testable code that you can model your applicaton with.</p><h2>Lets bring the magic to javascript.</h2><p>With the blessing that was ES2015, arrived the amazing generators. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*#Description">more about es2015 generators</a>
With total control over the flow of the program, we can use generators to bring some of the awesomeness of algebraic effects to javascript land.
I&#x27;ve written something for that! All of the magic you may need is packed inside a lightweight library <a href="https://github.com/phenax/algebraic-effects">algebraic-effects</a>.</p><p>########################## Example here #################################</p><p>########################## DOM Example here #################################</p><p>Pay close attention to how the implementation of the operations do not come into play till the moment you actually call the program.
Obviously there are better ways to solve DOM problems like this. Also, this library is not targetted to be used with the DOM. We already have reactJS covering the problem with hooks by adapting the mental model of algebraic effects to js pretty gracefully. The reason this library strays away from hook-like api and goes with generators is because to explore the true power of algebraic effects, you need full power of continuations in your program. Stuff like...</p><h2>Guess what? Multiple continuations!</h2><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> Random <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@algebraic-effects/effects&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">flipCoins</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isHead1 <span class="token operator">=</span> <span class="token keyword">yield</span> Random<span class="token punctuation">.</span><span class="token function">flipCoin</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isHead2 <span class="token operator">=</span> <span class="token keyword">yield</span> Random<span class="token punctuation">.</span><span class="token function">flipCoin</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>isHead1<span class="token punctuation">,</span> isHead2<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


Random<span class="token punctuation">.</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>flipCoins<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    Resolved<span class="token punctuation">:</span> results <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// results is a list of 6 2-tuples of booleans</span>
      <span class="token comment">// [ [true, false], [true, false], [true, true], [false, false], [false, true], [false, false] ]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div><p>&quot;What is this wizardry?&quot;
Heres how it works internally,</p><p>############# Explain with diagram ###############</p><h2>Modelling your js application with algebraic-effects</h2><p>effects/Resources/index.js</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> ResourceEffect <span class="token operator">=</span> <span class="token function">createEffect</span><span class="token punctuation">(</span><span class="token string">&#x27;Resource&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  list<span class="token punctuation">:</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;start&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;end&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;Array a&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  forall<span class="token punctuation">:</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;start&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;end&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;[a]&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> isMulti<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;query&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;a&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#x27;data&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ResourceEffect<span class="token punctuation">;</span></code></pre></div><p>effects/Resources/Profile.js</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> Profile <span class="token operator">=</span> ResourceEffect<span class="token punctuation">.</span><span class="token function">extendAs</span><span class="token punctuation">(</span><span class="token string">&#x27;Profile&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getProfileHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> 
  <span class="token keyword">return</span> Profile<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Profile<span class="token punctuation">;</span></code></pre></div><p>effects/Resources/GithubStars.js</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> ResourceEffect<span class="token punctuation">.</span><span class="token function">extendAs</span><span class="token punctuation">(</span><span class="token string">&#x27;GithubStars&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>programs/starrer.js</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Profile <span class="token keyword">from</span> <span class="token string">&#x27;../effects/profile&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> GithubStars <span class="token keyword">from</span> <span class="token string">&#x27;../effects/githubStars&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">starAllUserRepos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> profile <span class="token operator">=</span> <span class="token keyword">yield</span> Profile<span class="token punctuation">.</span><span class="token function">forall</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> GithubStars<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> repoid<span class="token punctuation">:</span> profile<span class="token punctuation">.</span>repositories<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>handlers/prof</p><p>actions/starAllProfiles.js</p><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> starAllUserRepos <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../programs/starrer&#x27;</span><span class="token punctuation">;</span></code></pre></div><h2>Conclusion</h2></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-pages-blog-algebraic-effects-mdx","jsonName":"blog-algebraic-effects-295","path":"/blog/algebraic-effects/"};window.dataPath="556/path---blog-algebraic-effects-295-12d-72I2H5I5vq6PhPMZ5XLx0rjI0Ys";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e09874469f93c353c21a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c2055f599856b981d1ae.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-10e5f83cd331805f2929.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-f9431aa5368f55faa6fe.js"],"component---src-pages-contact-tsx":["/component---src-pages-contact-tsx-5bdaba5ad9591a8930e4.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-377acc5bd695579128cb.js"],"component---src-pages-skills-tsx":["/component---src-pages-skills-tsx-ba60016399f69001e81e.js"],"component---src-pages-suggest-music-tsx":["/component---src-pages-suggest-music-tsx-f6a9c284d720d6f449bc.js"],"component---src-pages-blog-js-magic-tricks-mdx":["/component---src-pages-blog-js-magic-tricks-mdx-7255734d456a45fdad7e.js"],"component---src-pages-blog-algebraic-effects-mdx":["/component---src-pages-blog-algebraic-effects-mdx-718651d38c3b5f5677cb.js"],"component---src-pages-blog-sum-types-in-js-mdx":["/component---src-pages-blog-sum-types-in-js-mdx-9be24b75cedb80a61867.js"],"component---src-pages-blog-grandmas-recipes-for-cooking-redux-mdx":["/component---src-pages-blog-grandmas-recipes-for-cooking-redux-mdx-268d364845c115e6b978.js"],"pages-manifest":["/pages-manifest-f84fff81b4c561572969.js"]};/*]]>*/</script><script src="/webpack-runtime-1bb13a4a7498ee652ac1.js" async=""></script><script src="/styles-c0adcc84da8432c7d681.js" async=""></script><script src="/1-568e635cc0d331f623af.js" async=""></script><script src="/2-f8ffd91e9994516e7aa3.js" async=""></script><script src="/app-e09874469f93c353c21a.js" async=""></script><script src="/component---src-pages-blog-algebraic-effects-mdx-718651d38c3b5f5677cb.js" async=""></script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"/></body></html>