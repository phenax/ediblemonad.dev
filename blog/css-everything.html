<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" href="/favicon.ico" type="image/x-icon"/><title>Let&#x27;s build everything in CSS<!-- --> - Blog - Akshay Nair</title><meta name="description" content="Using css-everything to build interactive websites with turing complete CSS"/><meta name="next-head-count" content="6"/><link rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/103f6172f9496d3d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/103f6172f9496d3d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/64930e3055f5cdfd.css" as="style"/><link rel="stylesheet" href="/_next/static/css/64930e3055f5cdfd.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8344679a38250489.js" defer=""></script><script src="/_next/static/chunks/framework-6564377a49303cf2.js" defer=""></script><script src="/_next/static/chunks/main-09d1f590d0066570.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8af340429d7c0297.js" defer=""></script><script src="/_next/static/chunks/660-39c229660589c9c2.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-748333d840764e96.js" defer=""></script><script src="/_next/static/OS3xMTDMcxtkWoRrNFNqv/_buildManifest.js" defer=""></script><script src="/_next/static/OS3xMTDMcxtkWoRrNFNqv/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="__className_ad7b13"><header class="layout_header__H1FPN !pt-4 !pb-8"><span class="layout_bubble__VpDJP"></span><div class=" relative text-right flex px-6 justify-around gap-3 text-base align-top inline-block text-sm max-w-[800px] m-auto" style="margin-top:0.8rem"><div class="pt-1"><a class="layout_navLink__eokNB " href="/">Projects</a></div><div class="pt-1"><a class="layout_navLink__eokNB " href="/about">About</a></div><div class="pt-1"><a class="layout_navLink__eokNB " href="/blog">Blog</a><span class="absolute text-slate-600 ml-1 mt-0.5 w-full text-left max-md:hidden">/<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="circle-dot" class="svg-inline--fa fa-circle-dot fa-xs ml-1" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"></path></svg></span></div><div class="pt-1"><a class="layout_navLink__eokNB " href="https://desmos.ediblemonad.dev">Desmos</a></div><div class="pt-1"><a class="layout_navLink__eokNB " href="/contact">Links</a></div></div></header><main class="page_main__LgpvM"><article class="prose prose-invert max-w-full"><h1 class="text-accent-1">Let&#x27;s build everything in CSS</h1><!--$?--><template id="B:0"></template><!--/$--><hr/></article><div class="[&amp;&gt;.utterances]:max-w-none py-6 px-3"></div></main></div></div><div hidden id="S:0"><blockquote>
<p>The following events are based on a true story that I made up in my head.</p>
</blockquote>
<p>It all started when I was a child and a shady looking stranger wearing a hooded jacket walked up to me and started a conversation.
We were talking about the weather and how hot it was and then he said &quot;speaking of hot, you know what the hottest thing is right now? CSS!&quot;.</p>
<p>Completely disoriented by the segue, the only sentence my brain was able to muster was &quot;what?&quot;.</p>
<p>He said &quot;Oh yeah. You heard of CSS? It&#x27;s this incredible new thing on the streets. All the cool kids are doing it. Creating really fancy websites with seizure inducing color flashes&quot;. Being the year 2014, the statement itself wasn&#x27;t wrong. Tailwind didn&#x27;t exist and bootstrap was only used by backend asshats who didn&#x27;t care what their websites looked like.</p>
<p>Intrigued, I asked &quot;what is it like?&quot;.</p>
<p>With a smile on his face he couldn&#x27;t control, he replied &quot;Oh it is incredible! Everything is full of colors! You can make things move without the marquee element!&quot;. I was sold. &quot;No marquee?! That&#x27;s amazing.&quot;, I exclaimed. &quot;Yes! Here, take this&quot;, he said handing me a piece of paper with some css written on it. &quot;First one&#x27;s for free&quot;.</p>
<p>I looked at the snippet of CSS and that&#x27;s when it hit me. This was the future! At that moment, I was sure that by the year 2020, flying cars will be running on CSS.</p>
<hr/>
<p>Unfortunately, that hasn&#x27;t happened yet and instead we got a microscopic being that shut down the world. I believe the reason we never got flying cars and also why the pandemic happened is that they didn&#x27;t make CSS a turing complete programming language.</p>
<p>So to fix that, I created <a href="https://github.com/phenax/css-everything">css-everything</a>. It&#x27;s a library that allows you to write turing-complete CSS to build fully interactive websites if you&#x27;re brave enough.</p>
<h2>What can it do?</h2>
<p>Here&#x27;s an example of a counter in css-everything</p>
<!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$-->
<p>You might be thinking to yourself &quot;That is the dumbest thing I&#x27;ve seen all day and I want more. What else can I do with it?&quot;. The answer is anything and everything.</p>
<ul>
<li>Wanna do some math, just use <code>calc</code></li>
<li>Want to manage state, just use css variables and <code>update</code> function</li>
<li>Want to create dom-elements, <code>--cssx-children</code> will do that for you</li>
<li>Want to call custom functions, just use <code>call</code></li>
<li>Wanna make an api call, just call <code>request</code></li>
<li>...</li>
</ul>
<p>Wanna build a factorial calculator with it? Here you go:</p>
<!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$-->
<p>Looking at that you might think, &quot;oh that must be running js to calculate the factorial behind the
scenes&quot;. Nope. I mean yeah, it does run js but the way custom function work is very different from
how js does it. More on that later but spoiler alert, it uses dom nodes.</p>
<h2>Wanna build components?</h2>
<p>&quot;I want to build components&quot; said the react developer. So here you go, we call them <code>instances</code>.</p>
<!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$-->
<h2>Escape hatches?</h2>
<h3>Run javascript from CSS</h3>
<p>JS-in-CSS is the feature that&#x27;s going to change the world. You can call <code>js-eval</code> from any css-everything expression to run javascript code.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-id">#js-in-css</span> { <span class="hljs-attr">--cssx-on-mount</span>: <span class="hljs-built_in">js-eval</span>(<span class="hljs-string">&quot;console.log(&#x27;Hello from css!&#x27;)&quot;</span>); }
</code></pre>
<!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$-->
<h3>Render html</h3>
<p>What? Eww. Why would you want to do that? Alright if you really want to, you can use <code>--cssx-disgustingly-set-innerhtml</code> to set innerHTML of an element.</p>
<!--$!--><template data-dgst="DYNAMIC_SERVER_USAGE"></template><!--/$-->
<h2>How does it work?</h2>
<h4>CSS variables</h4>
<p>CSS variables are the backbone of css-everything. They maintain the state, listen to events, create
dom trees and in general is the glue between js and css.</p>
<h4>calc</h4>
<p>You might already know <code>calc</code> but the calc you use inside css-everything expressions are a little
different. They are evaluated in javascript
and have limited support for css things.</p>
<h4>Custom functions</h4>
<p>The way custom function calls work in <code>css-everything</code> is each call is represented as a dom node
inside the caller. The arguments passed to the function call are css variables on this new dom node
which represents our closure. The function is then executed within the context of our closure. In a
recursive function like the one above, each function call results in a dom node inside the previous
dom node resulting is a tree like this:</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;factorial-state&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cssx-layer&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- This is where the children would go... if you had any, you virgin --&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none; --n: 5;&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none; --n: 4;&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none; --n: 3;&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none; --n: 2;&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none; --n: 1;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>This is our call stack. When the call finally has a result, it collapses the stack and returns with the value.</p>
<p>You might be thinking, &quot;But what about the performance?&quot;. If so, its pretty cool that you thought that. Good job.</p>
<h2>Performance</h2>
<p>Fuck you.</p>
<h2>Conclusion</h2>
<p>This is the future of web development. Suck it! Flying cars, here we come!</p>
<hr/>
<p>On a serious note tho, if you&#x27;re considering using this, please consult a psychiatrist.
I made this because one day while working, I started picturing one of the circles of hell being
having to write and debug css issues for an eternity.</p></div><script>function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("B:0","S:0")</script><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"Let's build everything in CSS","description":"Using css-everything to build interactive websites with turing complete CSS","published":false,"date":"2024-06-01"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"css-everything"},"buildId":"OS3xMTDMcxtkWoRrNFNqv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>